{% extends 'base.html' %}

{% block title %}Editar Perfil - AquaNet{% endblock %}

{% block content %}
    <div class="bg-white p-6 md:p-8 rounded-2xl shadow-xl border border-gray-100 max-w-2xl mx-auto">
        
        <h2 class="text-2xl md:text-3xl font-bold mb-6 text-gray-800 border-b pb-4 flex items-center">
            <i class="fas fa-user-cog text-blue-600 mr-3"></i> Editar Meu Perfil
        </h2>

        <form method="POST" action="{{ url_for('edit_profile') }}" enctype="multipart/form-data" class="space-y-6">
            
            <div class="text-center pb-4 border-b border-gray-100">
                <img src="{{ current_user.profile_pic_url }}" alt="Foto de Perfil Atual" class="w-32 h-32 rounded-full mx-auto border-4 border-blue-200 mb-3 object-cover shadow-lg">
                <p class="text-sm font-semibold text-gray-600">Foto de Perfil Atual</p>
            </div>

            <fieldset class="p-4 border border-gray-200 rounded-xl">
                <legend class="text-sm font-bold text-gray-500 px-2">Informações Básicas</legend>
                <div class="mb-4">
                    <label for="username" class="block text-sm font-medium text-gray-700 mb-1">Nome de Usuário:</label>
                    <input type="text" id="username" name="username" value="{{ current_user.username }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors bg-gray-50">
                </div>
                
                <div class="mb-2">
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-1">Email:</label>
                    <input type="email" id="email" name="email" value="{{ current_user.email }}" required class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 transition-colors bg-gray-50">
                </div>
            </fieldset>

            <fieldset class="p-4 border border-gray-200 rounded-xl">
                 <legend class="text-sm font-bold text-gray-500 px-2">Alterar Foto</legend>
                <div class="mb-4">
                    <label for="profile_pic" class="block text-sm font-medium text-gray-700 mb-2">Escolher Nova Foto de Perfil (Opcional):</label>
                    <input type="file" id="profile_pic" name="profile_pic" accept="image/png, image/jpeg, image/gif, image/jfif, image/webp" class="block w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200 transition-colors">
                    <small class="text-xs text-gray-500 mt-2 block">A imagem será redimensionada para 150x150. Deixe vazio para manter a foto atual.</small>
                </div>
            </fieldset>
            
            <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-xl text-lg transition-colors shadow-md hover:shadow-lg transform active:scale-[0.99]">
                <i class="fas fa-save mr-2"></i> Salvar Alterações
            </button>
        </form>
        
        <p class="text-center mt-6">
            <a href="{{ url_for('profile', username=current_user.username) }}" class="text-sm font-semibold text-gray-500 hover:text-blue-600 hover:underline">
                Voltar ao Perfil
            </a>
        </p>
    </div>
{% endblock %}
